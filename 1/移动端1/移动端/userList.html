<!DOCTYPE html>
<html lang="en">
<head>
    <!--<meta charset="UTF-8">-->
    <!--<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">-->
    <meta name="viewport" content="initial-scale=1, user-scalable=0, minimal-ui" charset="UTF-8">
    <title>用户列表</title>
    <link rel="stylesheet" href="css/weui.css">
    <link rel="stylesheet" href="css/exam.css">
    <link rel="stylesheet" href="css/dropload.css">

    <link rel="stylesheet" href="css/mail.css">
    <style type="text/css">
        .inner{
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            -ms-flex: 1;
            flex: 1;
            background-color: #fff;
            overflow-y: scroll;
            -webkit-overflow-scrolling: touch;
        }
        .userList{
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            -ms-flex-direction:column;
            -webkit-box-orient:vertical;
            box-orient:vertical;
            -webkit-flex-direction:column;
            flex-direction:column;
        }
    </style>
</head>
<body>
<div class="userList">
    <h2>用户列表</h2>
    <div class="inner">
        <ul class="list">
            <li>
                <p>
                    <span>用&nbsp户&nbsp&nbspID：</span>
                    &nbsp123
                </p>
                <p><span>症&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp状：</span>&nbsp 头疼发烧想吐</p>
                <p><span>问诊编号：</span>&nbsp123456</p>
            </li>
            <li>
                <p>
                    <span>用&nbsp户&nbsp&nbspID：</span>
                    &nbsp123
                </p>
                <p><span>症&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp状：</span>&nbsp 头疼发烧想吐</p>
                <p><span>问诊编号：</span>&nbsp123456</p>
            </li>
            <li>
                <p>
                    <span>用&nbsp户&nbsp&nbspID：</span>
                    &nbsp123
                </p>
                <p><span>症&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp状：</span>&nbsp 头疼发烧想吐</p>
                <p><span>问诊编号：</span>&nbsp123456</p>
            </li>
            <li>
                <p>
                    <span>用&nbsp户&nbsp&nbspID：</span>
                    &nbsp123
                </p>
                <p><span>症&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp状：</span>&nbsp 头疼发烧想吐</p>
                <p><span>问诊编号：</span>&nbsp123456</p>
            </li>
            <li>
                <p>
                    <span>用&nbsp户&nbsp&nbspID：</span>
                    &nbsp123
                </p>
                <p><span>症&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp状：</span>&nbsp 头疼发烧想吐</p>
                <p><span>问诊编号：</span>&nbsp123456</p>
            </li>
            <li>
                <p>
                    <span>用&nbsp户&nbsp&nbspID：</span>
                    &nbsp123
                </p>
                <p><span>症&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp状：</span>&nbsp 头疼发烧想吐</p>
                <p><span>问诊编号：</span>&nbsp123456</p>
            </li>
            <li>
                <p>
                    <span>用&nbsp户&nbsp&nbspID：</span>
                    &nbsp123
                </p>
                <p><span>症&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp状：</span>&nbsp 头疼发烧想吐</p>
                <p><span>问诊编号：</span>&nbsp123456</p>
            </li>
            <li>
                <p>
                    <span>用&nbsp户&nbsp&nbspID：</span>
                    &nbsp123
                </p>
                <p><span>症&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp状：</span>&nbsp 头疼发烧想吐</p>
                <p><span>问诊编号：</span>&nbsp123456</p>
            </li>
        </ul>
    </div>
</div>
<script type="text/javascript" src="js/zepto.min.js"></script>
<script src="js/dropload.min.js"></script>
<script>
    $(function(){

       /* $('.header .btn').on('click',function(){
            var $this = $(this);
            if(!!$this.hasClass('lock')){
                $this.attr('class','btn unlock');
                $this.text('解锁');
                // 锁定
                dropload.lock();
                $('.dropload-down').hide();
            }else{
                $this.attr('class','btn lock');
                $this.text('锁定');
                // 解锁
                dropload.unlock();
                $('.dropload-down').show();
            }
        });*/
        var a=0;
        // dropload
        var dropload = $('.inner').dropload({
            domUp : {
                domClass   : 'dropload-up',
                domRefresh : '<div class="dropload-refresh">↓下拉刷新</div>',
                domUpdate  : '<div class="dropload-update">↑释放更新</div>',
                domLoad    : '<div class="dropload-load"><span class="loading"></span>加载中...</div>'
            },
            domDown : {
                domClass   : 'dropload-down',
                domRefresh : '<div class="dropload-refresh">↑上拉加载更多</div>',
                domLoad    : '<div class="dropload-load"><span class="loading"></span>加载中...</div>',
                domNoData  : '<div class="dropload-noData">暂无数据</div>'
            },

            loadDownFn : function(me){
                console.log(1)

                $.ajax({
                    type: 'GET',
                    url: 'json/more.json?limt=1',
                    dataType: 'json',
                    success: function(data){
                        var result = '';
                        for(var i = 0; i < data.lists.length; i++){
                            result+="<li>\
                                <p>\
                                <span>用&nbsp户&nbsp&nbspID：</span>\
                            &nbsp"+data.lists[i].id+"\
                                <p><span>症&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp状：\                          </span>&nbsp \
"+data.lists[i].name+"</p>\
                            <p><span>问诊编号：</span>&nbsp"+data.lists[i].age+"</p>\
                            </li> "
                           // result+="<li>"+data.lists[i].id+"</li>"


                        }
                        // 为了测试，延迟1秒加载
                        setTimeout(function(){
                            $('.list').append(result);
                            // 每次数据加载完，必须重置
                            dropload.resetload();
                        },1000);
                    },
                    error: function(xhr, type){
                        alert('Ajax error!');
                        // 即使加载出错，也得重置
                        dropload.resetload();
                    }
                });
            }
        });
    });
</script>

</body>
</html>